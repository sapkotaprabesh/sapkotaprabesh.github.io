<!DOCTYPE html>
<html>

<head>
    <!-- Set Title and Favicon -->
    <title>Home</title>
    <link rel='icon' href='assets/favicon.svg'>
    
    <!-- Load CSS and JS -->
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
    
    <!-- Load Fonts -->
    <link rel="stylesheet" href="FiraCode.css"> 

    <!-- Load Charset and set correct viewport -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="-1">
<style>
.search-box {
  position: absolute;
  top : 15%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(0, 0, 0, 0.3);<!--#2f3640;-->
  height: 40px;
  border-radius: 40px;
  padding: 10px;
  visibility: hidden;
}

.search-box:hover > .search-text{
  width: 240px;
  padding: 0 6px;
}

.search-text {
  border: none;
  background: none;
  outline: none;
  float: left;
  padding: 0;
  color: rgba(255, 255, 255, 0.2);
  font-family: 'Fira Code';
  font-size: 0px;
  visibility: visible;
  font-weight: normal;
  transition: 0.4s;
  line-height: 40px;
  width: 240px;
  cursor: default; 
}

#toast {
  visibility: hidden;
  height: 50px;
  width: fit-content;
  margin: auto;
  background-color: rgb(209, 68, 68);
  color: #fff;
  text-align: center;
  border-radius: 10px;
  position: fixed;
  z-index: 1;
  left: 0;
  right: 0;
  top: 30px;
  font-size: 17px;
  white-space: nowrap;
}

#toast #desc {
  color: #fff;
  padding: 16px;
  overflow: hidden;
  white-space: nowrap;
}

#toast.show {
  visibility: visible;
  animation: fadein 1s, fadeout 1s 3s;
}

@keyframes fadein {
  from {
    top: 0;
    opacity: 0;
  }
  to {
    top: 30px;
    opacity: 1
  }
}

@keyframes fadeout {
  from {
    top: 30px;
    opacity: 1;
  }
  to {
    top: 0;
    opacity: 0;
  }
}

</style>
</head>

<body oncontextmenu= "return false;" ondragstart="return false" onclick="showc()" ondblclick="window.location='https://www.google.com.np/imghp?hl=en&authuser=0&ogbl'">
    <div id="apexContainer">

      <div id='search-box' class = 'search-box'>
          <input id='ggl' class = "search-text" spellcheck="false" type="text" autocomplete="off" placeholder = "Search..">
      </div>

        <div id="toast"><div id="desc">Connectivity Status</div></div>
       
        <div id="headingContainer">(⌐■_■)</div>

        <div id="clockContainer">00:00</div>
        
        <ul id="bookmarksContainer">
            <div class="bookmark" id="b1"><a href="https://discord.com/app" id="aB1"><img oncontextmenu= "rtclick('aB1'); return false;" src="assets/discord.svg" id="imgB1"></a></div>
            <div class="bookmark" id="b2"><a href="https://www.facebook.com" id="aB2"><img oncontextmenu= "rtclick('aB2'); return false;" src="assets/facebook.svg" id="imgB2"></a></div>
            <div class="bookmark" id="b3"><a href="https://www.youtube.com" id="aB3"><img oncontextmenu= "rtclick('aB3'); return false;" src="assets/youtube.svg" id="imgB3"></a></div>
            <div class="bookmark" id="b4"><a href="https://gmail.com" id="aB4"><img oncontextmenu= "rtclick('aB4'); return false;" src="assets/gmail.svg" id="imgB4"></a></div>
            <div class="bookmark" id="b5"><img src="assets/settings.svg"></div>
        </ul>

        <div id="settingsContainer" style="display: none;">

            <div id="categoryContainer">
                <button class="button" id="headingSettingCategory">HEADING</button>
                <button class="button" id="clockSettingCategory">CLOCK</button>
                <button class="button" id="bookmarkSettingCategory">BOOKMARKS</button>
                <button class="button" id="generalSettingCategory">GENERAL</button>
            </div>
            
            <div id="headingSettingsContainer" style="display: grid;">
                <div>Content <input type="text" class="inputField" id="headingContentSetting" value="(⌐■_■)"></div>
                <div>Color <input type="text" class="inputField" id="headingColorSetting" value="#FFF"></div>
                <div>Font <input type="text" class="inputField" id="headingFontSetting" value="Fira Code"></div>
                <div>Font Size <input type="range" class="inputRange" id="headingFontSizeSetting" min="1" max="10" value="2"></div> 
            </div>
            
            <div id="clockSettingsContainer" style="display: none;">
                <div>Color <input type="text" class="inputField" id="clockColorSetting" value="#FFF"></div>
                <div>Font <input type="text" class="inputField" id="clockFontSetting" value="Fira Code"></div>
                <div>Font Size <input type="range" class="inputRange" id="clockFontSizeSetting"  min="1" max="20" value="10"></div>
                <div>Line Height <input type="range" class="inputRange" id="clockLineHeightSetting"  min="1" max="20" value="12"></div>
            </div>
            
            <div id="bookmarkSettingsContainer" style="display: none;">
                <div style="display: flex;">
                    <div style="width: 60%;text-align: center;">Icon</div>
                    <div style="width: 60%;text-align: center;">Link</div>
                </div>
                <div>b1 <input type="text" class="inputField" id="imgB1Setting" style="width: 40%;" value="assets/discord.svg"> <input type="text" class="inputField" id="aB1Setting" style="width: 40%;" value="https://discord.com/app"></div>
                <div>b2 <input type="text" class="inputField" id="imgB2Setting" style="width: 40%;" value="assets/facebook.svg"> <input type="text" class="inputField" id="aB2Setting" style="width: 40%;" value="https://www.facebook.com"></div>
                <div>b3 <input type="text" class="inputField" id="imgB3Setting" style="width: 40%;" value="assets/youtube.svg"> <input type="text" class="inputField" id="aB3Setting" style="width: 40%;" value="https://www.youtube.com"></div>
                <div>b4 <input type="text" class="inputField" id="imgB4Setting" style="width: 40%;" value="assets/gmail.svg"> <input type="text" class="inputField" id="aB4Setting" style="width: 40%;" value="https://gmail.com"></div>
            </div>
            
            <div id="generalSettingsContainer" style="display: none;">
                <div>Background <input type="text" class="inputField" id="generalBackgroundSetting" value="assets/moomkin.png"></div>
                <div>Blur Intensity <input type="range" class="inputRange" id="generalBlurIntensitySetting" min="1" max="15" value="5"></div>
            </div>

        </div>

    </div>

<script>
var kk=0;
document.addEventListener('keydown', function (e) {
    if(document.activeElement.tagName!="INPUT"){
        document.getElementById("ggl").focus();
    }
    if (e.key === "Enter") {

	var custom_keywords = {
	  'f' : 'https://www.facebook.com',
	  'd' : 'https://discord.com/app',
	  'g' : 'https://mail.google.com/mail/u/0/',
	  'y' : 'https://www.youtube.com/'
	};

	var inpt=document.getElementById("ggl").value;
        if (inpt.length==1){
		if(inpt in custom_keywords){
			document.location.href = custom_keywords[inpt];
			return;
		}
	}
	document.location.href = 'https://www.google.com/search?q='+inpt;
    }
    if (e.key === "Control") {
	show();
    }
    if (e.key === "Tab") {
	e.preventDefault();
	if(kk==0){
		document.getElementById("aB1").focus();
		kk=1;
	}else if (kk==1){
		document.getElementById("aB2").focus();
		kk=2;
	}else if (kk==2){
		document.getElementById("aB3").focus();
		kk=3;
        }else if (kk==3){
                document.getElementById("aB4").focus();
                kk=4;
	}else{
		document.getElementById("ggl").focus();
		kk=0;
	}
    }
});

function show(){
	if(document.getElementById('search-box').style.visibility=='visible'){
		document.getElementById("ggl").focus();
		document.getElementById('search-box').style.visibility='hidden';
		document.getElementById('headingContainer').style.visibility='visible';
		document.getElementById('ggl').style.fontSize='0px';
		document.getElementById("ggl").style.cursor = 'default';
	}else{
		document.getElementById('search-box').style.visibility='visible';
		document.getElementById('headingContainer').style.visibility='hidden';
		document.getElementById('ggl').style.fontSize='16px';
		document.getElementById("ggl").style.cursor = 'auto';
	}
};

function showc(){
        if(document.getElementById('search-box').style.visibility=='visible'){
                document.getElementById("ggl").focus();
                document.getElementById('search-box').style.visibility='hidden';
  		document.getElementById('headingContainer').style.visibility='visible';
                document.getElementById('ggl').style.fontSize='0px';
                document.getElementById("ggl").style.cursor = 'default';
        }
};

var offline_=0;
function connectivity_check(){
	let xhr = new XMLHttpRequest();
	xhr.open("GET", "https://jsonplaceholder.typicode.com/posts", true);
	xhr.onload = ()=>{ 
		if(xhr.status == 200 && xhr.status < 300){
			if(offline_==1){
				document.getElementById("desc").innerHTML = "Back Online :)";
				let notification = document.getElementById("toast");
				notification.style.backgroundColor='#90ee90';
				notification.className = "show";
				setTimeout(() => { notification.className = notification.className.replace("show", ""); }, 4000);
			}
			offline_=0;
		}else{
			offline();
		}
	}
	xhr.onerror = ()=>{
		offline();
	}
	xhr.send();
}

function offline(){
	if(offline_==0){
		document.getElementById("desc").innerHTML = "You're Offline :/";
		let notification = document.getElementById("toast");
		notification.style.backgroundColor='rgb(209, 68, 68)';
		notification.className = "show";
		setTimeout(() => { notification.className = notification.className.replace("show", ""); }, 4000);
	}
	offline_=1;
}

setInterval(()=>{
	connectivity_check();
}, 5000);

function addLoadEvent(func)
{    
    var oldonload = window.onload;
    if (typeof window.onload != 'function')
    {
        window.onload = func;
    } 
    else 
    {
        window.onload = function()
        {
            oldonload();
            func();
        }
    }
}

addLoadEvent(connectivity_check);

function rtclick(dib){
	window.open(document.getElementById(dib).href);
}
</script>

</body>

</html>
